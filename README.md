# dvmn-where_to_go

Интерактивная карта Москвы, на которой отображаются места для активного отдыха с подробным описанием, фотографиями и комментариями. Пример готового [сайта здесь.](https://juneshone.pythonanywhere.com/)

## Как установить

Установите Python версии 3.8.8, склонируйте репозиторий и создайте виртуальную среду командой:

```python
python -m venv venv
```

Активируйте виртуальную среду для Windows(в ином случае см. [документацию](https://docs.python.org/3/library/venv.html)):

```python
.\venv\Scripts\activate.bat
```

Затем используйте pip для установки зависимостей:

```python
pip install -r requirements.txt
```

## Переменнные окружения

Часть данных проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` и присвойте значения переменным окружения в формате: ПЕРЕМЕННАЯ=значение.

_Переменные окружения проекта:_

```ini
ALLOWED_HOSTS='host1,host2'                 # белый список хостов
DEBUG=True                                  # отладочный режим
SECRET_KEY='django_secret_key'              # секретный ключ django проекта
STATIC_URL='static/'                        # префикс URL-адреса для статических файлов
STATIC_ROOT='../site/static/'               # каталог для развертывания статических файлов
MEDIA_ROOT='Users/dvmn-where_to_go/media/'  # путь к корневому каталогу, в котором хранятся файлы
MEDIA_URL='media/'                          # URL-адрес, который будет обслуживать медиафайлы
```

## Как запустить

1. Создайте суперпользователя для доступа в Django-админку:

    ```python
    python manage.py createsuperuser
    ```

2. Примените миграции
    
    ```python
    python manage.py migrate
    ```

3. Наполните базу данных через админ-интерфейс, либо используя команду:

    ```python
    python manage.py load_place --json_url JSON_URL
    ```  
     
   _Пример_:

    ```python
    python manage.py load_place --json_url https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/places/Лагерь%20«Подмосковный».json
    ```   
   Json данные:

   ```
   {
       "title": "Павильон «Космос» на ВДНХ",
       "imgs": [
           "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/e5354d61df57cbd591fa3d6f8deb17f6.jpeg",
           "https://raw.githubusercontent.com/devmanorg/where-to-go-places/master/media/f9c34c9aec0d43226a7dda518026555a.jpg"
       ],
       "description_short": "«Космос» — это павильон на современной территории выставочного комплекса ВДНХ, построенный в 1939 году. Здание было расширено и приобрело существующий ныне вид в 1954 году. Тогда здесь установили купол из стали и стекла, который стал не только главной особенностью здания, но и гениальным архитектурным решением своего времени.",
       "description_long": "<p>В СССР именно в павильоне «Космос» демонстрировали экспонаты передовых сельскохозяйственных технологий и  новейшую космическую технику. После развала Союза экспозиция была забыта, частично свёрнута и оставлена там же, под большим куполом.</p><p>В течение многих лет часть павильона функционировала как выставочное пространство, а часть по-прежнему была заброшена. На среднем ярусе купола можно было обнаружить разбитые стёкла, куски фанеры и производственный мусор.</p><p>В 2016 году здесь начались реставрационные работы, в ходе которых были восстановлены стеклянный купол, панно из золотой смальты, внешний вид постройки, а также воссоздана уникальная утраченная в 1970-х годах люстра из рубинового стекла.</p><p>Сегодня в павильоне располагается выставочный центр «Космонавтика и авиация», а одним из его самых крупных экспонатов является макет модуля «Кристалл» орбитальной станции «Мир», который весит более 30 тонн.</p><p>Масштабная экспозиция состоит из трёх разделов, которые представляют как макеты, так и реальные космические аппараты, научные исследование в космической сфере, а также рассказывают о современном изучении космоса и прогнозах футуристов. Здесь также есть игровые симуляторы и 5D-кинотеатр.</p>",
       "coordinates": {
           "lng": "37.63759871907796",
           "lat": "55.82626129636804"
       }
   }
   ```
   
4. Запустите сервер Django для работы с базой данных:
    
    ```python
    python manage.py runserver 0:8000
    ```
    
    Админ-интерфейс будет доступен по адресу `127.0.0.1:8000/admin` или [здесь](https://juneshone.pythonanywhere.com/admin/).
    Для доступа используйте логин и пароль, созданный в п.1.

## Цель проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).